# Envio Indexer Configuration for Meta-Plot AI
name: meta-plot-ai
description: Real-time indexing for Meta-Plot AI autonomous DeFi agents

# Networks to index
networks:
  - id: 11155111 # Sepolia
    start_block: 4000000
    contracts:
      - name: MetaPlotAgent
        address: "0x1234567890123456789012345678901234567890" # Replace with actual deployed address
        handler: ./src/EventHandlers.ts
        events:
          - event: PermissionGranted(bytes32 indexed permissionId, address indexed user, address indexed target, uint256 amount, uint256 expiry)
          - event: PermissionRevoked(bytes32 indexed permissionId, address indexed user)
          - event: AgentExecuted(bytes32 indexed permissionId, address indexed target, uint256 amount, bool success, string reason)
      
      - name: AavePool
        address: "0x6Ae43d3271ff6888e7Fc43Fd7321a503ff738951" # Aave V3 Pool Sepolia
        handler: ./src/EventHandlers.ts
        events:
          - event: Supply(address indexed reserve, address user, address indexed onBehalfOf, uint256 amount, uint16 indexed referralCode)
          - event: Withdraw(address indexed reserve, address indexed user, address indexed to, uint256 amount)

# Field selection for optimization
field_selection:
  transaction_fields:
    - "hash"
    - "block_number"
    - "transaction_index"
    - "from"
    - "to"
    - "gas_used"
    - "gas_price"
  
  block_fields:
    - "number"
    - "timestamp"
    - "hash"

# Database configuration
database:
  postgres:
    host: localhost
    port: 5432
    user: postgres
    password: password
    database: meta_plot_ai